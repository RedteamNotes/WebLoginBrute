# 常见问题 (FAQ)

**版本：0.27.1**

本文档收集了 WebLoginBrute 用户的常见问题和解答。

## 安装与配置

### Q: 如何安装 WebLoginBrute？
**A:** 本项目目前未发布到 PyPI。请从源码安装：
1.  克隆项目仓库：
    ```bash
    git clone https://github.com/RedteamNotes/WebLoginBrute.git
    cd WebLoginBrute
    ```
2.  (推荐) 创建并激活 Python 虚拟环境。
3.  在项目根目录运行安装命令，它会自动处理所有依赖：
    ```bash
    pip install .
    ```

### Q: 提示 "模块未找到" (ModuleNotFoundError) 怎么办？
**A:** 这通常意味着依赖没有被正确安装，或者你没有在正确的虚拟环境中运行程序。请确保你已经激活了虚拟环境，并重新运行 `pip install .`。所有依赖都定义在 `pyproject.toml` 中。

### Q: 如何检查我安装的版本号？
**A:** 使用 `-V` 或 `--version` 参数：
```bash
webloginbrute --version
```

## 使用问题

### Q: 启动时需要哪些最基本的参数？
**A:** 理论上只需要两个：`--url` (或 `-u`) 和用户/密码字典之一。
-   `--url <URL>`: 目标登录页。
-   `--users <FILE>`: 用户名字典路径。
-   `--passwords <FILE>`: 密码字典路径。

通常，你需要同时提供用户和密码字典。

### Q: 如何找到目标网站的 CSRF token 字段名？
**A:** 在浏览器中打开登录页面，使用开发者工具 (F12) 检查 (Inspect) 登录表单的 HTML 源码。找到一个类型为 `hidden` 的 `<input>` 标签，其 `name` 属性值很可能就是 CSRF token 的字段名，例如 `_csrf`, `csrf_token` 等。然后通过 `--csrf <name>` 参数提供给程序。

### Q: 程序运行很慢，如何提速？
**A:** 速度慢可能是策略需要，也可能是配置问题。
1.  **检查对抗级别**: 确保 `--aggressive` 的值不是 `2` 或 `3`。级别越高，速度越慢。对于测试环境，可使用 `--aggressive 0`。
2.  **增加线程数**: 如果目标服务器和你的网络允许，可以适当增加 `--threads` (或 `-t`) 的值，例如 `-t 20`。
3.  **检查网络**: 确保你的网络连接到目标是稳定的。

### Q: 为什么所有尝试都失败了？
**A:** 可能的原因有很多：
1.  **URL 和 Action 不匹配**: 确保 `--url` 是登录页面，`--action` (如果提供) 是表单提交的正确地址。如果不确定，通常可以省略 `--action`，程序会使用 `--url` 作为提交地址。
2.  **CSRF Token**: 目标网站可能需要 CSRF token，请使用 `--csrf` 参数提供。
3.  **额外表单字段**: 某些登录表单除了用户名和密码外，还有其他隐藏字段。请使用 `--login-field` 和 `--login-value` 添加。
4.  **WAF/IP 封禁**: 你的请求可能被防火墙阻止了。尝试提高对抗级别 (`--aggressive 2` 或 `3`)，减少线程数 (`-t 3`)，或者更换网络环境（如使用代理）。
5.  **字典问题**: 确认你的字典里真的有正确的凭证。

## 功能特性

### Q: 如何启用断点续扫？
**A:** 使用 `-r` 或 `--resume` 参数。程序会读取进度文件（默认为 `bruteforce_progress.json`）并跳过已尝试的组合。
```bash
webloginbrute --config config.yaml --resume
```

### Q: 我可以把进度文件移到别处吗？
**A:** 可以。使用 `-l` 或 `--log` 参数指定你想要的路径和文件名。
```bash
webloginbrute --config config.yaml --log /path/to/my_progress.json
```

### Q: 对抗级别 (`aggressive`) 到底有什么用？
**A:** 它的唯一作用是在每次登录请求之间加入一段随机延迟。级别越高，延迟越长，请求速度越慢，但越不容易被目标的安全策略发现。
-   `0`: 无延迟。
-   `1`: 短延迟 (默认)。
-   `2`: 中等延迟。
-   `3`: 长延迟。

### Q: 为什么要有会话管理 (`session_*`) 功能？
**A:** 某些网站会限制单个会话的登录尝试次数。会话管理通过创建和轮换多个会话 (`requests.Session`)，可以有效绕过这种限制，使爆破能持续进行。对于不需要此功能的简单目标，可以通过 `--disable-session-rotation` 关闭。

## 参数和配置

### Q: 必需参数有哪些？

A: 必需参数有4个：

- `-u, --url`: 登录表单页面URL
- `-a, --action`: 登录表单提交URL
- `-U, --users`: 用户名字典文件
- `-P, --passwords`: 密码字典文件

### Q: 如何知道目标网站的CSRF token字段名？

A: 可以通过以下方法：

1. **浏览器开发者工具**：
   - 打开登录页面
   - 按F12打开开发者工具
   - 查看表单中的隐藏字段

2. **查看页面源码**：
   - 右键查看页面源码
   - 搜索 "csrf"、"token" 等关键词

3. **使用工具自动探测**：
   - 程序会自动分析表单字段
   - 启用详细输出 `-w` 查看探测结果

### Q: 字典文件格式有什么要求？

A: 字典文件要求：

- 格式：纯文本文件（.txt）
- 编码：UTF-8
- 内容：每行一个用户名或密码
- 大小：建议不超过100MB

示例：
```
admin
user
test
administrator
```

### Q: 如何创建测试字典？

A: 创建简单的测试字典：

```bash
# 用户名字典
echo -e "admin\nuser\ntest" > users.txt

# 密码字典
echo -e "password\n123456\nadmin" > passwords.txt
```

## 使用问题

### Q: 程序运行很慢怎么办？

A: 可以尝试以下优化：

1. **增加线程数**：
   ```bash
   -t 10  # 使用10个线程
   ```

2. **降低对抗级别**：
   ```bash
   -A A0  # 使用静默模式
   ```

3. **检查网络连接**：
   - 确保网络稳定
   - 考虑使用代理

### Q: 提示 "文件不存在" 怎么办？

A: 检查以下几点：

1. **文件路径是否正确**
2. **文件是否存在**
3. **是否有读取权限**
4. **路径中是否包含特殊字符**

### Q: 提示 "URL必须以http://或https://开头" 怎么办？

A: 确保URL包含协议前缀：

```bash
# 正确
-u https://target.com/login

# 错误
-u target.com/login
```

### Q: 没有找到登录成功怎么办？

A: 可能的原因和解决方法：

1. **检查URL是否正确**
2. **确认表单字段名是否匹配**
3. **检查CSRF token是否正确**
4. **字典中是否包含正确的用户名密码**
5. **目标是否有防护机制**

### Q: 程序被目标阻止了怎么办？

A: 可以尝试以下策略：

1. **提高对抗级别**：
   ```bash
   -A A2  # 使用激进模式
   ```

2. **减少线程数**：
   ```bash
   -t 3  # 减少并发
   ```

3. **使用代理**：
   - 配置代理服务器
   - 轮换IP地址

4. **增加延迟**：
   - 使用更高的对抗级别
   - 手动增加请求间隔

## 断点续扫

### Q: 如何启用断点续扫？

A: 使用 `-r` 参数：

```bash
webloginbrute \
  -u https://target.com/login \
  -a https://target.com/login \
  -U users.txt \
  -P passwords.txt \
  -r  # 启用断点续扫
```

### Q: 进度文件在哪里？

A: 默认进度文件为 `bruteforce_progress.json`，位于程序运行目录。

### Q: 如何自定义进度文件路径？

A: 使用 `-l` 参数：

```bash
-l my_progress.json  # 自定义进度文件
```

### Q: 进度文件可以删除吗？

A: 可以，但会丢失已尝试的组合记录。建议：

- 任务完成后自动清理
- 任务中断时保留以便续扫
- 定期备份重要进度

## 对抗级别

### Q: 对抗级别有什么区别？

A: 4个级别的特点：

- **A0 (静默模式)**：最快速度，无延迟
- **A1 (标准模式)**：平衡性能和隐蔽性
- **A2 (激进模式)**：高对抗，较慢速度
- **A3 (极限模式)**：最高对抗，最慢速度

### Q: 如何选择合适的对抗级别？

A: 根据目标环境选择：

- **测试环境**：A0
- **一般生产环境**：A1
- **有WAF/IPS防护**：A2
- **高安全性目标**：A3

### Q: 可以动态调整对抗级别吗？

A: 当前版本不支持运行时动态调整，需要重启程序。

## 性能优化

### Q: 如何提高爆破速度？

A: 优化策略：

1. **增加线程数**：`-t 20`
2. **降低对抗级别**：`-A A0`
3. **优化网络环境**
4. **使用高性能服务器**

### Q: 如何减少资源占用？

A: 优化策略：

1. **减少线程数**：`-t 3`
2. **使用较小的字典**
3. **定期重启程序**
4. **监控内存使用**

### Q: 程序占用内存过高怎么办？

A: 解决方法：

1. **减少会话池大小**
2. **降低线程数**
3. **使用较小的字典**
4. **定期清理缓存**

## 安全考虑

### Q: 如何保护敏感信息？

A: 程序内置保护机制：

1. **日志脱敏**：自动隐藏用户名密码
2. **审计日志**：独立存储安全事件
3. **进度文件**：加密存储敏感数据

### Q: 如何避免被检测？

A: 建议策略：

1. **使用合适的对抗级别**
2. **控制请求频率**
3. **使用代理或VPN**
4. **遵守法律法规**

### Q: 测试完成后如何清理？

A: 清理步骤：

1. **删除进度文件**
2. **清理日志文件**
3. **删除临时文件**
4. **清理浏览器缓存**

## 故障排除

### Q: 程序崩溃了怎么办？

A: 排查步骤：

1. **查看错误日志**
2. **检查配置参数**
3. **验证文件路径**
4. **测试网络连接**

### Q: 网络连接失败怎么办？

A: 解决方法：

1. **检查网络连接**
2. **验证URL可访问性**
3. **检查防火墙设置**
4. **尝试使用代理**

### Q: 字典文件读取失败怎么办？

A: 检查要点：

1. **文件格式是否正确**
2. **编码是否为UTF-8**
3. **文件大小是否过大**
4. **是否有读取权限**

## 高级功能

### Q: 如何测试配置而不发送请求？

A: 使用测试模式：

```bash
webloginbrute \
  -u https://target.com/login \
  -a https://target.com/login \
  -U users.txt \
  -P passwords.txt \
  --dry-run \
  --verbose
```

### Q: 如何查看详细日志？

A: 启用详细输出：

```bash
--verbose  # 详细输出
```

### Q: 如何自定义Cookie？

A: 使用Cookie文件：

```bash
-c cookies.txt  # Mozilla格式Cookie文件
```

## 技术支持

### Q: 在哪里可以获取帮助？

A: 获取帮助的渠道：

1. **查看文档**：阅读Wiki文档
2. **提交Issue**：在GitHub上提交问题
3. **社区讨论**：参与社区讨论
4. **邮件支持**：联系开发者

### Q: 如何报告Bug？

A: 报告Bug时请提供：

1. **版本信息**：`webloginbrute -V`
2. **错误信息**：完整的错误日志
3. **复现步骤**：详细的操作步骤
4. **环境信息**：操作系统、Python版本等

### Q: 如何贡献代码？

A: 贡献步骤：

1. Fork项目
2. 创建功能分支
3. 提交代码
4. 创建Pull Request

## 法律声明

### Q: 使用此工具是否合法？

A: 重要提醒：

- 仅用于授权的安全测试
- 遵守当地法律法规
- 不得用于非法用途
- 使用者承担法律责任

### Q: 作者承担什么责任？

A: 免责声明：

- 作者不承担任何因使用本工具而产生的法律责任
- 使用者需自行承担使用风险
- 请遵守相关法律法规 